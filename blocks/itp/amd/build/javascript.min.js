define("block_itp/javascript",["exports","core/notification","core/templates"],(function(_exports,_notification,_templates){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};_exports.init=(elemId,email,customer)=>{document.querySelector("#linkatt-"+elemId);let linkass=document.querySelector("#linkass-"+elemId),boback=document.querySelector(".back");null!==boback&&(window.console.log(boback),window.console.log(customer));null!==linkass&&linkass.addEventListener("click",(e=>{e.preventDefault();let courseid=e.target.attributes.courseid.value;const xhr=new XMLHttpRequest,url="https://"+window.location.hostname+"/webservice/rest/server.php";xhr.open("POST",url,!0);const formData=new FormData;formData.append("wstoken","e7c69cd9f8136c608e22b90d760cff7a"),formData.append("wsfunction","block_itp_get_assessment_details"),formData.append("moodlewsrestformat","json"),formData.append("params[0][courseid]",courseid),formData.append("params[0][email]",email),xhr.send(formData),xhr.onload=function(){if(4===this.readyState&&200===this.status){const res=JSON.parse(this.response),formattedData={customer:customer,assessmentDetails:res.map((item=>({kpi:item.kpi,id:item.id,coursename:item.coursename,type:item.type,score:item.score,timemodified:item.timemodified})))};response=formattedData,_templates.default.renderForPromise("block_itp/assessmentDetails",response).then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents(".block_itp_content",html,js),document.querySelector(".block_itp_table").remove()})).catch((error=>(0,_notification.exception)(error)))}var response},xhr.onprogress=function(event){event.lengthComputable?window.console.log("Recibidos ".concat(event.loaded," de ").concat(event.total," bytes")):window.console.log("Recibidos ".concat(event.loaded," bytes"))},xhr.onerror=function(){window.console.log("Solicitud fallida")}}))}}));

//# sourceMappingURL=javascript.min.js.map