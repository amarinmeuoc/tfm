{"version":3,"file":"downloadpdf.min.js","sources":["../src/downloadpdf.js"],"sourcesContent":["export const init = (PDF, user, courses) => {\n    const bocertificate = document.querySelector('#bocertificate');\n    //const bodiploma = document.querySelector('#bodiploma');\n    window.console.log(\"pulsado...\", courses);\n    if (bocertificate!==null){\n        bocertificate.addEventListener('click', () => {\n            const coursetitles = courses[0];\n            const coursecodes = courses[1];\n            const startdates = courses[2];\n            const enddates = courses[3];\n            const counts = courses[4];\n            const att = courses[5];\n            const ass = courses[6];\n    \n            // Grouping data by the 'codes' array\n            const groupedData = groupbycodes(coursecodes, coursetitles, startdates, enddates, counts, att, ass);\n    \n            // Calculate the required values for each group\n            const result = getResult(groupedData);\n            createPDFAcroField(PDF,user,result);\n        });\n    }\n    \n}\n\nconst groupbycodes = (codes, coursetitles, startdates, enddates, counts, att, ass) => {\n    return codes.reduce((acc, code, index) => {\n        if (!acc[code]) {\n            acc[code] = {\n                titles: [],\n                startDates: [],\n                endDates: [],\n                counts: [],\n                att: [],\n                ass: []\n            };\n        }\n        acc[code].titles.push(coursetitles[index]);\n        acc[code].startDates.push(startdates[index]);\n        acc[code].endDates.push(enddates[index]);\n        acc[code].counts.push(counts[index]);\n        acc[code].att.push(att[index]);\n        acc[code].ass.push(ass[index]);\n        return acc;\n    }, {});\n}\n\nconst getResult = (groupedData) => {\n    return Object.keys(groupedData).map(code => {\n        const group = groupedData[code];\n        const minStartDate = Math.min(...group.startDates.map(date => parseInt(date)));\n        const maxEndDate = Math.max(...group.endDates.map(date => parseInt(date)));\n        const sumCount = group.counts.reduce((sum, count) => sum + parseInt(count), 0);\n        let averagePercentage1 = group.att.reduce((sum, percentage) => sum + parseFloat(percentage), 0) / group.att.length;\n        averagePercentage1=(isNaN(averagePercentage1))?'-':averagePercentage1;\n        let averagePercentage2 = group.ass.reduce((sum, percentage) => sum + parseFloat(percentage), 0) / group.ass.length;\n        averagePercentage2=(isNaN(averagePercentage2))?'-':averagePercentage2;\n        return {\n            code,\n            titles: group.titles,\n            minStartDate,\n            maxEndDate,\n            sumCount: sumCount.toFixed(0),\n            averagePercentage1: (averagePercentage1==='-')?'-':averagePercentage1.toFixed(2),\n            averagePercentage2: (averagePercentage2==='-')?'-':averagePercentage2.toFixed(2)\n        };\n    });\n}\n\n\nasync function createPDFAcroField(PDF, user, result){\n    const pdfDoc = await PDF.PDFDocument.create();\n    const font = await pdfDoc.embedFont(PDF.StandardFonts.Helvetica);\n    const fontBold = await pdfDoc.embedFont(PDF.StandardFonts.HelveticaBold);\n\n    //Colocamos las imagenes\n    const logoNavantiaURL = '/blocks/itp/pix/navantia-logo.png';\n    const logoNavantiaImageBytes = await fetch(logoNavantiaURL).then(res => res.arrayBuffer());\n    const logoNavantia = await pdfDoc.embedPng(logoNavantiaImageBytes);\n\n    const fondoURL = '/blocks/itp/pix/marco-vertical-navantia.jpg';\n    const fondoURLImageBytes = await fetch(fondoURL).then(res => res.arrayBuffer());\n    const fondo = await pdfDoc.embedJpg(fondoURLImageBytes);\n\n    \n    let page= pdfDoc.addPage();\n    const { width, height } = page.getSize();\n\n    // Create a string of text and measure its width and height in our custom font\n    const text = 'Trainee report';\n    const textSize = 24;\n    const textWidth = font.widthOfTextAtSize(text, textSize);\n    const textHeight = font.heightAtSize(textSize);\n    const verticalGap=textHeight/2;\n    const comienzo=120;\n\n    page.drawImage(fondo, {\n        x: 0,\n        y: 0,\n        width:page.getWidth(),\n        height:page.getHeight(),\n        \n      });\n\n    page.drawImage(logoNavantia, {\n    x: 45,\n    y: page.getHeight() -100,\n    width: 110, \n    height: 60,\n    \n    });\n\n    // Draw the string of text on the page\n    page.drawText(text, {\n      x: width/2-textWidth/2,\n      y: height-textHeight-verticalGap-comienzo,\n      size: textSize,\n      font: font,\n      color: PDF.rgb(0, 0.53, 0.71),\n    })\n\n    const startdate=result.reduce((acc,currentValue)=>{\n        return (acc<=currentValue.minStartDate)?acc:currentValue.minStartDate;\n    },result[0].minStartDate);\n\n    let startdateAux=new Date(startdate*1000);\n    day=startdateAux.getDate();\n    month=startdateAux.getMonth()+1;\n    year=startdateAux.getFullYear();\n    let formattedStartDate=`${day.toString().padStart(2, '0')}-${month.toString().padStart(2, '0')}-${year}`;\n\n    const enddate=result.reduce((acc,currentValue)=>{\n        return (acc>currentValue.maxEndDate)?acc:currentValue.maxEndDate;\n    },result[0].maxEndDate)\n\n    let enddateAux=new Date(enddate*1000);\n    day=enddateAux.getDate();\n    month=enddateAux.getMonth()+1;\n    year=enddateAux.getFullYear();\n    let formattedEndDate=`${day.toString().padStart(2, '0')}-${month.toString().padStart(2, '0')}-${year}`;\n    \n    \n    const textBody=`Below is a detailed list of the grades obtained by the trainee: ${user.firstname}, ${user.lastname} with billid: ${user.firstname}, in the training programme of Navantia which started in ${formattedStartDate} to ${formattedEndDate}.`\n    const textBodySize=14;\n    const textBodyWidth = font.widthOfTextAtSize(textBody, textBodySize);\n    const textBodyHeight = font.heightAtSize(textBodySize);\n    page.drawText(textBody, {\n        x: 40,\n        y: height-verticalGap-textHeight-verticalGap-textBodyHeight-verticalGap-verticalGap-comienzo,\n        size: textBodySize,\n        font: font,\n        color: PDF.rgb(0, 0, 0),\n        maxWidth: width-80, wordBreaks: [\" \"]\n      })\n\n    let lineHeightPos=height-175-comienzo;\n    page.drawLine({\n    start: { x: 40, y: lineHeightPos },\n    end: { x: width-40, y: lineHeightPos },\n    thickness: 1,\n    color: PDF.rgb(0, 0.53, 0.71),\n    opacity: 0.5,\n    });\n    const field1='Coursename';\n    const textFieldSize=10;\n    const textField1Width = font.widthOfTextAtSize(field1, textFieldSize);\n    const textField1Height = font.heightAtSize(textFieldSize);\n    const verticalFieldGap=textField1Height/2;\n    page.drawText( field1, {\n        x: 45,\n        y: height - 180 + textField1Height-comienzo,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n    const field2=\"Duration\"\n    const textField2Width = font.widthOfTextAtSize(field2, textFieldSize);\n    page.drawText( field2, {\n        x: 50+textField1Width+textField2Width+180,\n        y: height - 180 + textField1Height-comienzo,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n\n    const field3=\"Attendance\"\n    const textField3Width = font.widthOfTextAtSize(field3, textFieldSize);\n    const field4=\"Assessment\"\n    const textField4Width = font.widthOfTextAtSize(field4, textFieldSize);\n    page.drawText( field3, {\n        x: width-55-textField3Width-textField4Width-30,\n        y: height - 180 + textField1Height-comienzo,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n\n    page.drawText( field4, {\n        x: width-55-textField4Width,\n        y: height - 180 + textField1Height-comienzo,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n   \n    \n\n    result.map((course,index)=>{\n        if (index==15 || index==30 || index==45 || index==60 || index==75){\n            page=pdfDoc.addPage();\n\n            page.drawImage(fondo, {\n                x: 0,\n                y: 0,\n                width:page.getWidth(),\n                height:page.getHeight(),\n                \n              });\n        \n            page.drawImage(logoNavantia, {\n            x: 45,\n            y: page.getHeight() -100,\n            width: 110, \n            height: 60,\n            \n            });\n\n            // Draw the string of text on the page\n            page.drawText(text, {\n                x: width/2-textWidth/2,\n                y: height-textHeight-verticalGap-comienzo,\n                size: textSize,\n                font: font,\n                color: PDF.rgb(0, 0.53, 0.71),\n            })\n\n            \n            \n            page.drawText(textBody, {\n                x: 40,\n                y: height-verticalGap-textHeight-verticalGap-textBodyHeight-verticalGap-verticalGap-comienzo,\n                size: textBodySize,\n                font: font,\n                color: PDF.rgb(0, 0, 0),\n                maxWidth: width-80, wordBreaks: [\" \"]\n            })\n            lineHeightPos=height-175-comienzo;\n            page.drawLine({\n                start: { x: 40, y: lineHeightPos },\n                end: { x: width-40, y: lineHeightPos },\n                thickness: 1,\n                color: PDF.rgb(0, 0.53, 0.71),\n                opacity: 0.5,\n            });\n\n            page.drawText( field1, {\n                x: 45,\n                y: height - 180 + textField1Height-comienzo,\n                size: textFieldSize,\n                font: fontBold,\n                color: PDF.rgb(0, 0, 0)\n            });\n\n            page.drawText( field2, {\n                x: 50+textField1Width+textField2Width+180,\n                y: height - 180 + textField1Height-comienzo,\n                size: textFieldSize,\n                font: fontBold,\n                color: PDF.rgb(0, 0, 0)\n            });\n\n            page.drawText( field3, {\n                x: width-55-textField3Width-textField4Width-30,\n                y: height - 180 + textField1Height-comienzo,\n                size: textFieldSize,\n                font: fontBold,\n                color: PDF.rgb(0, 0, 0)\n            });\n\n            page.drawText( field4, {\n                x: width-55-textField4Width,\n                y: height - 180 + textField1Height-comienzo,\n                size: textFieldSize,\n                font: fontBold,\n                color: PDF.rgb(0, 0, 0)\n            });\n\n        } //End if\n        let textCourseTitleWith=font.widthOfTextAtSize(course.titles[0],textFieldSize);\n        let textFieldHeight=font.heightAtSize(textFieldSize);\n        \n            lineHeightPos-=18;  \n        \n        const courseTitles=truncateString(course.titles[0],40);\n        page.drawText( courseTitles, {\n            x: 45,\n            y: lineHeightPos+textFieldHeight/2,\n            size: textFieldSize,\n            font: font,\n            color: PDF.rgb(0, 0, 0)\n        });\n        let textDurationWith=font.widthOfTextAtSize(course.sumCount,textFieldSize);\n        page.drawText( course.sumCount, {\n            x: 50+textField1Width+textField2Width+180+textField2Width/3,\n            y: lineHeightPos+textFieldHeight/2,\n            size: textFieldSize,\n            font: font,\n            color: PDF.rgb(0, 0, 0)\n        });\n        let attendance=(course.averagePercentage1==='-')?'-':(course.averagePercentage1*1).toFixed(2);\n        \n        page.drawText( attendance, {\n            x: width-100-textField3Width-textField4Width+textField3Width/2,\n            y: lineHeightPos+textFieldHeight/2,\n            size: textFieldSize,\n            font: font,\n            color: PDF.rgb(0, 0, 0)\n        });\n\n        let assessment=(course.averagePercentage2==='-')?'-':(course.averagePercentage2*1).toFixed(2);\n        \n        page.drawText( assessment, {\n            x: width-75-textField4Width+textField4Width/2,\n            y: lineHeightPos+textFieldHeight/2,\n            size: textFieldSize,\n            font: font,\n            color: PDF.rgb(0, 0, 0)\n        });\n\n        page.drawLine({\n            start: { x: 40, y: lineHeightPos },\n            end: { x: width-40, y: lineHeightPos },\n            thickness: 1,\n            color: PDF.rgb(0, 0.53, 0.71),\n            opacity: 0.5,\n        });\n\n    })\n\n    //This is the content of the last page:\n    const listComputedAtt=result.filter(elem=>{\n        return elem.averagePercentage1!=='-'\n    })\n\n    const listComputedAss=result.filter(elem=>{\n        return elem.averagePercentage2!=='-'\n    });\n\n    let avgAtt=listComputedAtt.reduce((acumulador, elementoActual) => acumulador + Math.round(elementoActual.averagePercentage1*100)/100, 0)/listComputedAtt.length;\n    avgAtt=avgAtt.toFixed(2);\n    let avgAss=listComputedAss.reduce((acumulador, elementoActual) => acumulador + Math.round(elementoActual.averagePercentage2*100)/100, 0)/listComputedAss.length;\n    avgAss=avgAss.toFixed(2);\n\n    //Total score for the course\n    page.drawText( 'Total course average: ', {\n        x: width-350,\n        y: lineHeightPos-24,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n\n    \n    page.drawText( avgAtt+' %', {\n        x: width-100-textField3Width/2-textField4Width,\n        y: lineHeightPos-24,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n    \n    \n    page.drawText( ''+avgAss, {\n        x: width-75-(textField4Width/2),\n        y: lineHeightPos-24,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n    \n\n\n\n\n    // Genera el PDF y obtén los datos en formato Base64\nconst pdfBase64 = await pdfDoc.saveAsBase64();\n\n// Convierte el Base64 a un array de bytes\nconst byteCharacters = atob(pdfBase64);\nconst byteNumbers = new Array(byteCharacters.length);\nfor (let i = 0; i < byteCharacters.length; i++) {\n    byteNumbers[i] = byteCharacters.charCodeAt(i);\n}\nconst byteArray = new Uint8Array(byteNumbers);\n\n// Crea un Blob a partir del array de bytes\nconst blob = new Blob([byteArray], { type: 'application/pdf' });\n\n// Crea un objeto URL a partir del Blob\nconst blobUrl = URL.createObjectURL(blob);\n\n// Crea un enlace temporal para descargar el archivo\nconst link = document.createElement('a');\nlink.href = blobUrl;\nlink.download = 'documento.pdf';\n\n// Añade el enlace al documento y haz clic en él para forzar la descarga\ndocument.body.appendChild(link);\nlink.click();\n\n// Remueve el enlace del documento\ndocument.body.removeChild(link);\n};\n\nfunction truncateString(str, maxLength) {\n    if (str.length > maxLength) {\n        return str.slice(0, maxLength - 3) + '...';\n    }\n    return str;\n}"],"names":["PDF","user","courses","bocertificate","document","querySelector","window","console","log","addEventListener","coursetitles","coursecodes","startdates","enddates","counts","att","ass","groupedData","groupbycodes","result","getResult","pdfDoc","PDFDocument","create","font","embedFont","StandardFonts","Helvetica","fontBold","HelveticaBold","logoNavantiaURL","logoNavantiaImageBytes","fetch","then","res","arrayBuffer","logoNavantia","embedPng","fondoURL","fondoURLImageBytes","fondo","embedJpg","page","addPage","width","height","getSize","text","textSize","textWidth","widthOfTextAtSize","textHeight","heightAtSize","verticalGap","comienzo","drawImage","x","y","getWidth","getHeight","drawText","size","color","rgb","startdate","reduce","acc","currentValue","minStartDate","startdateAux","Date","day","getDate","month","getMonth","year","getFullYear","formattedStartDate","toString","padStart","enddate","maxEndDate","enddateAux","formattedEndDate","textBody","firstname","lastname","textBodySize","textBodyHeight","maxWidth","wordBreaks","lineHeightPos","drawLine","start","end","thickness","opacity","field1","textFieldSize","textField1Width","textField1Height","field2","textField2Width","field3","textField3Width","field4","textField4Width","map","course","index","titles","textFieldHeight","courseTitles","str","maxLength","length","slice","truncateString","sumCount","attendance","averagePercentage1","toFixed","assessment","averagePercentage2","listComputedAtt","filter","elem","listComputedAss","avgAtt","acumulador","elementoActual","Math","round","avgAss","pdfBase64","saveAsBase64","byteCharacters","atob","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","blob","Blob","type","blobUrl","URL","createObjectURL","link","createElement","href","download","body","appendChild","click","removeChild","createPDFAcroField","codes","code","startDates","endDates","push","Object","keys","group","min","date","parseInt","max","sum","count","percentage","parseFloat","isNaN"],"mappings":"0JAAoB,CAACA,IAAKC,KAAMC,iBACtBC,cAAgBC,SAASC,cAAc,kBAE7CC,OAAOC,QAAQC,IAAI,aAAcN,SACb,OAAhBC,eACAA,cAAcM,iBAAiB,SAAS,WAC9BC,aAAeR,QAAQ,GACvBS,YAAcT,QAAQ,GACtBU,WAAaV,QAAQ,GACrBW,SAAWX,QAAQ,GACnBY,OAASZ,QAAQ,GACjBa,IAAMb,QAAQ,GACdc,IAAMd,QAAQ,GAGde,YAAcC,aAAaP,YAAaD,aAAcE,WAAYC,SAAUC,OAAQC,IAAKC,KAGzFG,OAASC,UAAUH,6BAoDHjB,IAAKC,KAAMkB,cACnCE,aAAerB,IAAIsB,YAAYC,SAC/BC,WAAaH,OAAOI,UAAUzB,IAAI0B,cAAcC,WAChDC,eAAiBP,OAAOI,UAAUzB,IAAI0B,cAAcG,eAGpDC,gBAAkB,oCAClBC,6BAA+BC,MAAMF,iBAAiBG,MAAKC,KAAOA,IAAIC,gBACtEC,mBAAqBf,OAAOgB,SAASN,wBAErCO,SAAW,8CACXC,yBAA2BP,MAAMM,UAAUL,MAAKC,KAAOA,IAAIC,gBAC3DK,YAAcnB,OAAOoB,SAASF,wBAGhCG,KAAMrB,OAAOsB,gBACXC,MAAEA,MAAFC,OAASA,QAAWH,KAAKI,UAGzBC,KAAO,iBACPC,SAAW,GACXC,UAAYzB,KAAK0B,kBAAkBH,KAAMC,UACzCG,WAAa3B,KAAK4B,aAAaJ,UAC/BK,YAAYF,WAAW,EACvBG,SAAS,IAEfZ,KAAKa,UAAUf,MAAO,CAClBgB,EAAG,EACHC,EAAG,EACHb,MAAMF,KAAKgB,WACXb,OAAOH,KAAKiB,cAIhBjB,KAAKa,UAAUnB,aAAc,CAC7BoB,EAAG,GACHC,EAAGf,KAAKiB,YAAa,IACrBf,MAAO,IACPC,OAAQ,KAKRH,KAAKkB,SAASb,KAAM,CAClBS,EAAGZ,MAAM,EAAEK,UAAU,EACrBQ,EAAGZ,OAAOM,WAAWE,YAAYC,SACjCO,KAAMb,SACNxB,KAAMA,KACNsC,MAAO9D,IAAI+D,IAAI,EAAG,IAAM,aAGpBC,UAAU7C,OAAO8C,QAAO,CAACC,IAAIC,eACvBD,KAAKC,aAAaC,aAAcF,IAAIC,aAAaC,cAC3DjD,OAAO,GAAGiD,kBAERC,aAAa,IAAIC,KAAe,IAAVN,WAC1BO,IAAIF,aAAaG,UACjBC,MAAMJ,aAAaK,WAAW,EAC9BC,KAAKN,aAAaO,kBACdC,6BAAsBN,IAAIO,WAAWC,SAAS,EAAG,iBAAQN,MAAMK,WAAWC,SAAS,EAAG,iBAAQJ,YAE5FK,QAAQ7D,OAAO8C,QAAO,CAACC,IAAIC,eACrBD,IAAIC,aAAac,WAAYf,IAAIC,aAAac,YACxD9D,OAAO,GAAG8D,gBAERC,WAAW,IAAIZ,KAAa,IAARU,SACxBT,IAAIW,WAAWV,UACfC,MAAMS,WAAWR,WAAW,EAC5BC,KAAKO,WAAWN,kBACZO,2BAAoBZ,IAAIO,WAAWC,SAAS,EAAG,iBAAQN,MAAMK,WAAWC,SAAS,EAAG,iBAAQJ,YAG1FS,mFAA4EnF,KAAKoF,uBAAcpF,KAAKqF,kCAAyBrF,KAAKoF,8EAAqER,kCAAyBM,sBAChOI,aAAa,GAEbC,gBADgBhE,KAAK0B,kBAAkBkC,SAAUG,cAChC/D,KAAK4B,aAAamC,eACzC7C,KAAKkB,SAASwB,SAAU,CACpB5B,EAAG,GACHC,EAAGZ,OAAOQ,YAAYF,WAAWE,YAAYmC,eAAenC,YAAYA,YAAYC,SACpFO,KAAM0B,aACN/D,KAAMA,KACNsC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,GACrB0B,SAAU7C,MAAM,GAAI8C,WAAY,CAAC,WAGjCC,cAAc9C,OAAO,IAAIS,SAC7BZ,KAAKkD,SAAS,CACdC,MAAO,CAAErC,EAAG,GAAIC,EAAGkC,eACnBG,IAAK,CAAEtC,EAAGZ,MAAM,GAAIa,EAAGkC,eACvBI,UAAW,EACXjC,MAAO9D,IAAI+D,IAAI,EAAG,IAAM,KACxBiC,QAAS,WAEHC,OAAO,aACPC,cAAc,GACdC,gBAAkB3E,KAAK0B,kBAAkB+C,OAAQC,eACjDE,iBAAmB5E,KAAK4B,aAAa8C,eAE3CxD,KAAKkB,SAAUqC,OAAQ,CACnBzC,EAAG,GACHC,EAAGZ,OAAS,IAAMuD,iBAAiB9C,SACnCO,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,WAEnBsC,OAAO,WACPC,gBAAkB9E,KAAK0B,kBAAkBmD,OAAQH,eACvDxD,KAAKkB,SAAUyC,OAAQ,CACnB7C,EAAG,GAAG2C,gBAAgBG,gBAAgB,IACtC7C,EAAGZ,OAAS,IAAMuD,iBAAiB9C,SACnCO,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,WAGnBwC,OAAO,aACPC,gBAAkBhF,KAAK0B,kBAAkBqD,OAAQL,eACjDO,OAAO,aACPC,gBAAkBlF,KAAK0B,kBAAkBuD,OAAQP,eACvDxD,KAAKkB,SAAU2C,OAAQ,CACnB/C,EAAGZ,MAAM,GAAG4D,gBAAgBE,gBAAgB,GAC5CjD,EAAGZ,OAAS,IAAMuD,iBAAiB9C,SACnCO,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAGzBrB,KAAKkB,SAAU6C,OAAQ,CACnBjD,EAAGZ,MAAM,GAAG8D,gBACZjD,EAAGZ,OAAS,IAAMuD,iBAAiB9C,SACnCO,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAKzB5C,OAAOwF,KAAI,CAACC,OAAOC,SACJ,IAAPA,OAAoB,IAAPA,OAAoB,IAAPA,OAAoB,IAAPA,OAAoB,IAAPA,QACpDnE,KAAKrB,OAAOsB,UAEZD,KAAKa,UAAUf,MAAO,CAClBgB,EAAG,EACHC,EAAG,EACHb,MAAMF,KAAKgB,WACXb,OAAOH,KAAKiB,cAIhBjB,KAAKa,UAAUnB,aAAc,CAC7BoB,EAAG,GACHC,EAAGf,KAAKiB,YAAa,IACrBf,MAAO,IACPC,OAAQ,KAKRH,KAAKkB,SAASb,KAAM,CAChBS,EAAGZ,MAAM,EAAEK,UAAU,EACrBQ,EAAGZ,OAAOM,WAAWE,YAAYC,SACjCO,KAAMb,SACNxB,KAAMA,KACNsC,MAAO9D,IAAI+D,IAAI,EAAG,IAAM,OAK5BrB,KAAKkB,SAASwB,SAAU,CACpB5B,EAAG,GACHC,EAAGZ,OAAOQ,YAAYF,WAAWE,YAAYmC,eAAenC,YAAYA,YAAYC,SACpFO,KAAM0B,aACN/D,KAAMA,KACNsC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,GACrB0B,SAAU7C,MAAM,GAAI8C,WAAY,CAAC,OAErCC,cAAc9C,OAAO,IAAIS,SACzBZ,KAAKkD,SAAS,CACVC,MAAO,CAAErC,EAAG,GAAIC,EAAGkC,eACnBG,IAAK,CAAEtC,EAAGZ,MAAM,GAAIa,EAAGkC,eACvBI,UAAW,EACXjC,MAAO9D,IAAI+D,IAAI,EAAG,IAAM,KACxBiC,QAAS,KAGbtD,KAAKkB,SAAUqC,OAAQ,CACnBzC,EAAG,GACHC,EAAGZ,OAAS,IAAMuD,iBAAiB9C,SACnCO,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAGzBrB,KAAKkB,SAAUyC,OAAQ,CACnB7C,EAAG,GAAG2C,gBAAgBG,gBAAgB,IACtC7C,EAAGZ,OAAS,IAAMuD,iBAAiB9C,SACnCO,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAGzBrB,KAAKkB,SAAU2C,OAAQ,CACnB/C,EAAGZ,MAAM,GAAG4D,gBAAgBE,gBAAgB,GAC5CjD,EAAGZ,OAAS,IAAMuD,iBAAiB9C,SACnCO,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAGzBrB,KAAKkB,SAAU6C,OAAQ,CACnBjD,EAAGZ,MAAM,GAAG8D,gBACZjD,EAAGZ,OAAS,IAAMuD,iBAAiB9C,SACnCO,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,MAILvC,KAAK0B,kBAAkB0D,OAAOE,OAAO,GAAGZ,mBAC5Da,gBAAgBvF,KAAK4B,aAAa8C,eAElCP,eAAe,SAEbqB,sBAyHUC,IAAKC,cACrBD,IAAIE,OAASD,iBACND,IAAIG,MAAM,EAAGF,UAAY,GAAK,aAElCD,IA7HgBI,CAAeT,OAAOE,OAAO,GAAG,IACnDpE,KAAKkB,SAAUoD,aAAc,CACzBxD,EAAG,GACHC,EAAGkC,cAAcoB,gBAAgB,EACjClD,KAAMqC,cACN1E,KAAMA,KACNsC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAEJvC,KAAK0B,kBAAkB0D,OAAOU,SAASpB,eAC5DxD,KAAKkB,SAAUgD,OAAOU,SAAU,CAC5B9D,EAAG,GAAG2C,gBAAgBG,gBAAgB,IAAIA,gBAAgB,EAC1D7C,EAAGkC,cAAcoB,gBAAgB,EACjClD,KAAMqC,cACN1E,KAAMA,KACNsC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,SAErBwD,WAAwC,MAA5BX,OAAOY,mBAA0B,KAA+B,EAA1BZ,OAAOY,oBAAsBC,QAAQ,GAE3F/E,KAAKkB,SAAU2D,WAAY,CACvB/D,EAAGZ,MAAM,IAAI4D,gBAAgBE,gBAAgBF,gBAAgB,EAC7D/C,EAAGkC,cAAcoB,gBAAgB,EACjClD,KAAMqC,cACN1E,KAAMA,KACNsC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,SAGrB2D,WAAwC,MAA5Bd,OAAOe,mBAA0B,KAA+B,EAA1Bf,OAAOe,oBAAsBF,QAAQ,GAE3F/E,KAAKkB,SAAU8D,WAAY,CACvBlE,EAAGZ,MAAM,GAAG8D,gBAAgBA,gBAAgB,EAC5CjD,EAAGkC,cAAcoB,gBAAgB,EACjClD,KAAMqC,cACN1E,KAAMA,KACNsC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAGzBrB,KAAKkD,SAAS,CACVC,MAAO,CAAErC,EAAG,GAAIC,EAAGkC,eACnBG,IAAK,CAAEtC,EAAGZ,MAAM,GAAIa,EAAGkC,eACvBI,UAAW,EACXjC,MAAO9D,IAAI+D,IAAI,EAAG,IAAM,KACxBiC,QAAS,cAMX4B,gBAAgBzG,OAAO0G,QAAOC,MACC,MAA1BA,KAAKN,qBAGVO,gBAAgB5G,OAAO0G,QAAOC,MACC,MAA1BA,KAAKH,yBAGZK,OAAOJ,gBAAgB3D,QAAO,CAACgE,WAAYC,iBAAmBD,WAAaE,KAAKC,MAAwC,IAAlCF,eAAeV,oBAAwB,KAAK,GAAGI,gBAAgBT,OACzJa,OAAOA,OAAOP,QAAQ,OAClBY,OAAON,gBAAgB9D,QAAO,CAACgE,WAAYC,iBAAmBD,WAAaE,KAAKC,MAAwC,IAAlCF,eAAeP,oBAAwB,KAAK,GAAGI,gBAAgBZ,OACzJkB,OAAOA,OAAOZ,QAAQ,GAGtB/E,KAAKkB,SAAU,yBAA0B,CACrCJ,EAAGZ,MAAM,IACTa,EAAGkC,cAAc,GACjB9B,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAIzBrB,KAAKkB,SAAUoE,OAAO,KAAM,CACxBxE,EAAGZ,MAAM,IAAI4D,gBAAgB,EAAEE,gBAC/BjD,EAAGkC,cAAc,GACjB9B,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,KAIzBrB,KAAKkB,SAAU,GAAGyE,OAAQ,CACtB7E,EAAGZ,MAAM,GAAI8D,gBAAgB,EAC7BjD,EAAGkC,cAAc,GACjB9B,KAAMqC,cACN1E,KAAMI,SACNkC,MAAO9D,IAAI+D,IAAI,EAAG,EAAG,WAQvBuE,gBAAkBjH,OAAOkH,eAGzBC,eAAiBC,KAAKH,WACtBI,YAAc,IAAIC,MAAMH,eAAerB,YACxC,IAAIyB,EAAI,EAAGA,EAAIJ,eAAerB,OAAQyB,IACvCF,YAAYE,GAAKJ,eAAeK,WAAWD,SAEzCE,UAAY,IAAIC,WAAWL,aAG3BM,KAAO,IAAIC,KAAK,CAACH,WAAY,CAAEI,KAAM,oBAGrCC,QAAUC,IAAIC,gBAAgBL,MAG9BM,KAAOlJ,SAASmJ,cAAc,KACpCD,KAAKE,KAAOL,QACZG,KAAKG,SAAW,gBAGhBrJ,SAASsJ,KAAKC,YAAYL,MAC1BA,KAAKM,QAGLxJ,SAASsJ,KAAKG,YAAYP,MAxYdQ,CAAmB9J,IAAIC,KAAKkB,kBAMlCD,aAAe,CAAC6I,MAAOrJ,aAAcE,WAAYC,SAAUC,OAAQC,IAAKC,MACnE+I,MAAM9F,QAAO,CAACC,IAAK8F,KAAMnD,SACvB3C,IAAI8F,QACL9F,IAAI8F,MAAQ,CACRlD,OAAQ,GACRmD,WAAY,GACZC,SAAU,GACVpJ,OAAQ,GACRC,IAAK,GACLC,IAAK,KAGbkD,IAAI8F,MAAMlD,OAAOqD,KAAKzJ,aAAamG,QACnC3C,IAAI8F,MAAMC,WAAWE,KAAKvJ,WAAWiG,QACrC3C,IAAI8F,MAAME,SAASC,KAAKtJ,SAASgG,QACjC3C,IAAI8F,MAAMlJ,OAAOqJ,KAAKrJ,OAAO+F,QAC7B3C,IAAI8F,MAAMjJ,IAAIoJ,KAAKpJ,IAAI8F,QACvB3C,IAAI8F,MAAMhJ,IAAImJ,KAAKnJ,IAAI6F,QAChB3C,MACR,IAGD9C,UAAaH,aACRmJ,OAAOC,KAAKpJ,aAAa0F,KAAIqD,aAC1BM,MAAQrJ,YAAY+I,MACpB5F,aAAe+D,KAAKoC,OAAOD,MAAML,WAAWtD,KAAI6D,MAAQC,SAASD,SACjEvF,WAAakD,KAAKuC,OAAOJ,MAAMJ,SAASvD,KAAI6D,MAAQC,SAASD,SAC7DlD,SAAWgD,MAAMxJ,OAAOmD,QAAO,CAAC0G,IAAKC,QAAUD,IAAMF,SAASG,QAAQ,OACxEpD,mBAAqB8C,MAAMvJ,IAAIkD,QAAO,CAAC0G,IAAKE,aAAeF,IAAMG,WAAWD,aAAa,GAAKP,MAAMvJ,IAAIoG,OAC5GK,mBAAoBuD,MAAMvD,oBAAqB,IAAIA,uBAC/CG,mBAAqB2C,MAAMtJ,IAAIiD,QAAO,CAAC0G,IAAKE,aAAeF,IAAMG,WAAWD,aAAa,GAAKP,MAAMtJ,IAAImG,cAC5GQ,mBAAoBoD,MAAMpD,oBAAqB,IAAIA,mBAC5C,CACHqC,KAAAA,KACAlD,OAAQwD,MAAMxD,OACd1C,aAAAA,aACAa,WAAAA,WACAqC,SAAUA,SAASG,QAAQ,GAC3BD,mBAA0C,MAArBA,mBAA0B,IAAIA,mBAAmBC,QAAQ,GAC9EE,mBAA0C,MAArBA,mBAA0B,IAAIA,mBAAmBF,QAAQ"}