{"version":3,"file":"downloadpdf.min.js","sources":["../src/downloadpdf.js"],"sourcesContent":["export const init=(PDF,customerid)=>{\n    let link=document.querySelectorAll('.courseFinished');\n    link.forEach(element => {\n        element.addEventListener('click',(e)=>{\n            e.preventDefault();\n            let trainee_list=e.target.getAttribute('data-trainees').split(',');\n            trainee_list=trainee_list.reduce((arr,elem)=>{\n                const aux= elem.split(\"_\");\n                return [...arr,{group:aux[0],billid:aux[1]}];\n            },[]);\n            const coursedetail={\n                wbs:e.target.getAttribute('data-wbs'),\n                startdate:e.target.getAttribute('data-startdate'),\n                enddate:e.target.getAttribute('data-enddate')\n            }\n            \n            startRequestServer(PDF,customerid,coursedetail,trainee_list);\n            \n        })\n    });\n}\n\nconst startRequestServer=(PDF,customerid,coursedetail,trainee_list)=>{\n    const xhr=new XMLHttpRequest();\n    const url=window.location.protocol+'//'+window.location.hostname+'/webservice/rest/server.php';\n    xhr.open('POST',url,true);\n    const formData= new FormData();\n    const token=document.querySelector('#id_token').value;\n    formData.append('wstoken',token);\n    formData.append('wsfunction','report_partialplan_get_assessment');\n    formData.append('moodlewsrestformat','json');\n    for (let i=0;i<trainee_list.length;i++){\n        const group=trainee_list[i].group.trim();\n        const billid=trainee_list[i].billid.trim();\n        formData.append(`params[${i}][customerid]`,customerid);\n        formData.append(`params[${i}][group]`,group);\n        formData.append(`params[${i}][billid]`,billid);\n        formData.append(`params[${i}][wbs]`,coursedetail.wbs);\n        formData.append(`params[${i}][startdate]`,coursedetail.startdate);\n        formData.append(`params[${i}][enddate]`,coursedetail.enddate);\n    }            \n    xhr.send(formData);\n    xhr.onload = (event) =>{\n        onLoadFunction(PDF,xhr);\n        };\n    xhr.onprogress = (event)=>{\n        onProgressFunction(event);\n    } \n    xhr.onerror = function() {\n        window.console.log(\"Solicitud fallida\");\n    };\n}\n\nconst onLoadFunction=(PDF,myXhr)=>{\n    if (myXhr.readyState=== 4 && myXhr. status === 200){\n      const res=JSON.parse(myXhr.response);\n      \n      //Prepare the excel for to be downloaded\n      createPdf(PDF,res);\n  }\n  }\n\nconst onProgressFunction= (event)=>{\n    if (event.lengthComputable) {\n      window.console.log(`Recibidos ${event.loaded} de ${event.total} bytes`);\n    } else {\n      window.console.log(`Recibidos ${event.loaded} bytes`); // sin Content-Length\n    }\n}\n\nasync function createPdf(PDF,response){\n    const pdfDoc = await PDF.PDFDocument.create();\n    const font = await pdfDoc.embedFont(PDF.StandardFonts.Helvetica);\n    const fontBold = await pdfDoc.embedFont(PDF.StandardFonts.HelveticaBold);\n\n    //Colocamos las imagenes\n    const logoNavantiaURL = 'pix/navantia-logo.png';\n    const logoNavantiaImageBytes = await fetch(logoNavantiaURL).then(res => res.arrayBuffer());\n    const logoNavantia = await pdfDoc.embedPng(logoNavantiaImageBytes);\n\n    const fondoURL = 'pix/marco-vertical-navantia.jpg';\n    const fondoURLImageBytes = await fetch(fondoURL).then(res => res.arrayBuffer());\n    const fondo = await pdfDoc.embedJpg(fondoURLImageBytes);\n\n    listTrainees=response;\n    let page= pdfDoc.addPage();\n    const { width, height } = page.getSize();\n\n    // Create a string of text and measure its width and height in our custom font\n    const text = 'Course report';\n    const textSize = 24;\n    const textWidth = font.widthOfTextAtSize(text, textSize);\n    const textHeight = font.heightAtSize(textSize);\n    const verticalGap=textHeight/2;\n    const comienzo=120;\n\n    page.drawImage(fondo, {\n        x: 0,\n        y: 0,\n        width:page.getWidth(),\n        height:page.getHeight(),\n        \n      });\n\n    page.drawImage(logoNavantia, {\n    x: 45,\n    y: page.getHeight() -100,\n    width: 110, \n    height: 60,\n    \n    });\n\n    // Draw the string of text on the page\n    page.drawText(text, {\n      x: width/2-textWidth/2,\n      y: height-textHeight-verticalGap-comienzo,\n      size: textSize,\n      font: font,\n      color: PDF.rgb(0, 0.53, 0.71),\n    })\n\n    const courseTitle=listTrainees[0].coursename;\n    const textCourseSize=16;\n    const textCourseTitleWidth = font.widthOfTextAtSize(courseTitle, textCourseSize);\n    const textCourseTitleHeight = font.heightAtSize(textCourseSize);\n\n    // Draw the string of text on the page\n    page.drawText(courseTitle, {\n        x: width/2-textCourseTitleWidth/2,\n        y: height-textCourseTitleHeight-verticalGap-textHeight-verticalGap-comienzo,\n        size: textCourseSize,\n        font: font,\n        color: PDF.rgb(0, 0.53, 0.71),\n      })\n    //Convert dates in miliseconds\n    let startdate=new Date(listTrainees[0].startdate*1000);\n    let day=startdate.getDate();\n    let month=startdate.getMonth()+1;\n    let year=startdate.getFullYear();\n    let formattedStartDate=`${day.toString().padStart(2, '0')}-${month.toString().padStart(2, '0')}-${year}`;\n    \n    let enddate=new Date(listTrainees[0].enddate*1000);\n    day=enddate.getDate();\n    month=enddate.getMonth()+1;\n    year=enddate.getFullYear();\n    let formattedEndDate=`${day.toString().padStart(2, '0')}-${month.toString().padStart(2, '0')}-${year}`;\n    \n    const textBody=`Below is a detailed list of the grades obtained by the trainees for the course ${listTrainees[0].coursename} that took place on the dates: ${formattedStartDate} to ${formattedEndDate}.`\n    const textBodySize=14;\n    const textBodyWidth = font.widthOfTextAtSize(textBody, textBodySize);\n    const textBodyHeight = font.heightAtSize(textBodySize);\n    page.drawText(textBody, {\n        x: 40,\n        y: height-textCourseTitleHeight-verticalGap-textHeight-verticalGap-textBodyHeight-verticalGap-verticalGap-comienzo,\n        size: textBodySize,\n        font: font,\n        color: PDF.rgb(0, 0, 0),\n        maxWidth: width-80, wordBreaks: [\" \"]\n      })\n\n    let lineHeightPos=height-180-comienzo;\n    page.drawLine({\n    start: { x: 40, y: lineHeightPos },\n    end: { x: width-40, y: lineHeightPos },\n    thickness: 1,\n    color: PDF.rgb(0, 0.53, 0.71),\n    opacity: 0.5,\n    });\n    const field1='ID Number';\n    const textFieldSize=12;\n    const textField1Width = font.widthOfTextAtSize(field1, textFieldSize);\n    const textField1Height = font.heightAtSize(textFieldSize);\n    const verticalFieldGap=textField1Height/2;\n    page.drawText( field1, {\n        x: 55,\n        y: height - 180 + textField1Height-comienzo,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n    const field2=\"Name\"\n    const textField2Width = font.widthOfTextAtSize(field2, textFieldSize);\n    page.drawText( field2, {\n        x: 55+textField1Width+textField2Width,\n        y: height - 180 + textField1Height-comienzo,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n\n    const field3=\"Attendance\"\n    const textField3Width = font.widthOfTextAtSize(field3, textFieldSize);\n    const field4=\"Assessment\"\n    const textField4Width = font.widthOfTextAtSize(field4, textFieldSize);\n    page.drawText( field3, {\n        x: width-55-textField3Width-textField4Width-30,\n        y: height - 180 + textField1Height-comienzo,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n\n    page.drawText( field4, {\n        x: width-55-textField4Width,\n        y: height - 180 + textField1Height-comienzo,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n   \n    \n\n    listTrainees.map((trainee,index)=>{\n        if (index==10 || index==20 || index==30 || index==40 || index==50){\n            page=pdfDoc.addPage();\n\n            page.drawImage(fondo, {\n                x: 0,\n                y: 0,\n                width:page.getWidth(),\n                height:page.getHeight(),\n                \n              });\n        \n            page.drawImage(logoNavantia, {\n            x: 45,\n            y: page.getHeight() -100,\n            width: 110, \n            height: 60,\n            \n            });\n\n            // Draw the string of text on the page\n            page.drawText(text, {\n                x: width/2-textWidth/2,\n                y: height-textHeight-verticalGap-comienzo,\n                size: textSize,\n                font: font,\n                color: PDF.rgb(0, 0.53, 0.71),\n            })\n\n            page.drawText(courseTitle, {\n                x: width/2-textCourseTitleWidth/2,\n                y: height-textCourseTitleHeight-verticalGap-textHeight-verticalGap-comienzo,\n                size: textCourseSize,\n                font: font,\n                color: PDF.rgb(0, 0.53, 0.71),\n            })\n            \n            page.drawText(textBody, {\n                x: 40,\n                y: height-textCourseTitleHeight-verticalGap-textHeight-verticalGap-textBodyHeight-verticalGap-verticalGap-comienzo,\n                size: textBodySize,\n                font: font,\n                color: PDF.rgb(0, 0, 0),\n                maxWidth: width-80, wordBreaks: [\" \"]\n            })\n            lineHeightPos=height-180-comienzo;\n            page.drawLine({\n                start: { x: 40, y: lineHeightPos },\n                end: { x: width-40, y: lineHeightPos },\n                thickness: 1,\n                color: PDF.rgb(0, 0.53, 0.71),\n                opacity: 0.5,\n            });\n\n            page.drawText( field1, {\n                x: 55,\n                y: height - 180 + textField1Height-comienzo,\n                size: textFieldSize,\n                font: fontBold,\n                color: PDF.rgb(0, 0, 0)\n            });\n\n            page.drawText( field2, {\n                x: 55+textField1Width+textField2Width,\n                y: height - 180 + textField1Height-comienzo,\n                size: textFieldSize,\n                font: fontBold,\n                color: PDF.rgb(0, 0, 0)\n            });\n\n            page.drawText( field3, {\n                x: width-55-textField3Width-textField4Width-30,\n                y: height - 180 + textField1Height-comienzo,\n                size: textFieldSize,\n                font: fontBold,\n                color: PDF.rgb(0, 0, 0)\n            });\n\n            page.drawText( field4, {\n                x: width-55-textField4Width,\n                y: height - 180 + textField1Height-comienzo,\n                size: textFieldSize,\n                font: fontBold,\n                color: PDF.rgb(0, 0, 0)\n            });\n\n        } //End if\n        let textIdNumberWith=font.widthOfTextAtSize(trainee.billid,textFieldSize);\n        let textFieldHeight=font.heightAtSize(textFieldSize);\n        \n            lineHeightPos-=25;  \n        \n        \n        page.drawText( trainee.billid, {\n            x: 55,\n            y: lineHeightPos+textFieldHeight/2,\n            size: textFieldSize,\n            font: font,\n            color: PDF.rgb(0, 0, 0)\n        });\n        let textNameWith=font.widthOfTextAtSize(trainee.firstname +', ' +trainee.lastname,textFieldSize);\n        page.drawText( trainee.firstname +', ' +trainee.lastname, {\n            x: 55+textField1Width+textField2Width,\n            y: lineHeightPos+textFieldHeight/2,\n            size: textFieldSize,\n            font: font,\n            color: PDF.rgb(0, 0, 0)\n        });\n        let attendance=(trainee.att===null)?'-':(trainee.att*1).toFixed(2);\n        \n        page.drawText( attendance, {\n            x: width-100-textField3Width-textField4Width+textField3Width/2,\n            y: lineHeightPos+textFieldHeight/2,\n            size: textFieldSize,\n            font: font,\n            color: PDF.rgb(0, 0, 0)\n        });\n\n        let assessment=(trainee.ass===null)?'-':(trainee.ass*1).toFixed(2);\n        \n        page.drawText( assessment, {\n            x: width-75-textField4Width+textField4Width/2,\n            y: lineHeightPos+textFieldHeight/2,\n            size: textFieldSize,\n            font: font,\n            color: PDF.rgb(0, 0, 0)\n        });\n\n        page.drawLine({\n            start: { x: 40, y: lineHeightPos },\n            end: { x: width-40, y: lineHeightPos },\n            thickness: 1,\n            color: PDF.rgb(0, 0.53, 0.71),\n            opacity: 0.5,\n        });\n\n    })\n\n    \n    \n\n    const listComputedAtt=listTrainees.filter(elem=>{\n        return elem.att!==null\n    })\n\n    const listComputedAss=listTrainees.filter(elem=>{\n        return elem.ass!==null\n    });\n\n    let avgAtt=listComputedAtt.reduce((acumulador, elementoActual) => acumulador + Math.floor(elementoActual.att), 0)/listComputedAtt.length;\n    avgAtt=avgAtt.toFixed(2);\n    let avgAss=listComputedAss.reduce((acumulador, elementoActual) => acumulador + Math.floor(elementoActual.ass), 0)/listComputedAss.length;\n    avgAss=avgAss.toFixed(2);\n\n    //Total score for the course\n    page.drawText( 'Total course average: ', {\n        x: width-350,\n        y: lineHeightPos-24,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n\n    \n    page.drawText( avgAtt+' %', {\n        x: width-100-textField3Width/2-textField4Width,\n        y: lineHeightPos-24,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n    \n    \n    page.drawText( ''+avgAss, {\n        x: width-75-(textField4Width/2),\n        y: lineHeightPos-24,\n        size: textFieldSize,\n        font: fontBold,\n        color: PDF.rgb(0, 0, 0)\n    });\n\n\n\n    const pdfDataUri=await pdfDoc.saveAsBase64({dataUri:true});\n    window.open(pdfDataUri);\n};\n\n"],"names":["PDF","customerid","document","querySelectorAll","forEach","element","addEventListener","e","preventDefault","trainee_list","target","getAttribute","split","reduce","arr","elem","aux","group","billid","coursedetail","wbs","startdate","enddate","startRequestServer","xhr","XMLHttpRequest","url","window","location","protocol","hostname","open","formData","FormData","token","querySelector","value","append","i","length","trim","send","onload","event","onLoadFunction","onprogress","onProgressFunction","onerror","console","log","myXhr","readyState","status","response","pdfDoc","PDFDocument","create","font","embedFont","StandardFonts","Helvetica","fontBold","HelveticaBold","logoNavantiaURL","logoNavantiaImageBytes","fetch","then","res","arrayBuffer","logoNavantia","embedPng","fondoURL","fondoURLImageBytes","fondo","embedJpg","listTrainees","page","addPage","width","height","getSize","text","textSize","textWidth","widthOfTextAtSize","textHeight","heightAtSize","verticalGap","comienzo","drawImage","x","y","getWidth","getHeight","drawText","size","color","rgb","courseTitle","coursename","textCourseSize","textCourseTitleWidth","textCourseTitleHeight","Date","day","getDate","month","getMonth","year","getFullYear","formattedStartDate","toString","padStart","formattedEndDate","textBody","textBodySize","textBodyHeight","maxWidth","wordBreaks","lineHeightPos","drawLine","start","end","thickness","opacity","field1","textFieldSize","textField1Width","textField1Height","field2","textField2Width","field3","textField3Width","field4","textField4Width","map","trainee","index","textFieldHeight","firstname","lastname","attendance","att","toFixed","assessment","ass","listComputedAtt","filter","listComputedAss","avgAtt","acumulador","elementoActual","Math","floor","avgAss","pdfDataUri","saveAsBase64","dataUri","createPdf","JSON","parse","lengthComputable","loaded","total"],"mappings":"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"}